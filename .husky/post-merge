#!/usr/bin/env sh

changed() {
    git diff --name-only HEAD@{1} HEAD | grep "^$1" >/dev/null 2>&1
}

BLUE='\033[0;34m'
GREEN='\033[0;32m'
NC='\033[0m'

printf "${BLUE}π” pnpm-lock.yml λ³€κ²½μ‚¬ν•­ ν™•μΈ μ¤‘...${NC}\n"

if changed "pnpm-lock.yml"; then
    printf "${GREEN}π“¦ pnpm-lock.ymlμ΄ λ³€κ²½λμ—μµλ‹λ‹¤. μμ΅΄μ„±μ„ μµμ‹  μƒνƒλ΅ μ—…λ°μ΄νΈν•©λ‹λ‹¤.${NC}\n"
    pnpm install
fi

printf "${GREEN}π‰ λ¨λ“  μ—…λ°μ΄νΈκ°€ μ™„λ£λμ—μµλ‹λ‹¤ :)${NC}\n"

exit 0