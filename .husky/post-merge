#!/usr/bin/env sh

function changed {
    git diff --name-only HEAD@{1} HEAD | grep "^$1" >/dev/null 2>&1
}

echo 'pnpm-lock.yml λ³€κ²½μ‚¬ν•­ ν™•μΈ μ¤‘...'

if changed "pnpm-lock.yml"; then
    echo "π“¦ pnpm-lock.ymlμ΄ λ³€κ²½λμ—μµλ‹λ‹¤. μμ΅΄μ„±μ„ μµμ‹  μƒνƒλ΅ μ—…λ°μ΄νΈν•©λ‹λ‹¤."
    pnpm install
fi

echo 'λ¨λ“  μ—…λ°μ΄νΈκ°€ μ™„λ£λμ—μµλ‹λ‹¤ :)'

echo 'ν•„μ”ν• κ²½μ° pnpm prebuildλ¥Ό μ‹¤ν–‰ν•μ—¬ λ„¤μ΄ν‹°λΈ μ½”λ“λ¥Ό μƒμ„±ν•  μ μμµλ‹λ‹¤.'

exit 0